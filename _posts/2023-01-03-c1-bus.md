---
title: Transloc 
author: aaron
date: 2023-01-03 11:00:00 -0500
categories: [projects, engineering]
tags: [webscraping, apis, duke]
---

TL;DR:
: I built a device that displays the bus schedule for the bus that runs between the two halves of Duke's campus.

---

Duke is split into two halves, East Campus and West Campus. East houses the freshman undergraduate population and a few classes (mostly humanities) and the rest of the university is on West. There's a bus line called the C-1 that runs between the two campuses. Buses run every few minutes at peak hours and roughly every 20 minutes late at night. 

Because the bus line is run by Duke, they've integrated this system called "Transloc" into their busing system. It's essentially a bus tracker--it allows you to see where all the buses are in real-time and it provides estimates as to when each bus will arrive at their stops. I know a few other universities also have Transloc, or something similar.

To its credit, Transloc is a fairly good product. There's a mobile app that doesn't have an ugly UI, and the information it displays is accurate. My main gripe with it is that the app can be slow at times. When I'm in my room on East Campus and I need to know exactly how long I have until the last bus I can take that will get me to class on time arrives, I can't be sitting around waiting a full 5 seconds until the app loads before taking a couple of seconds to navigate to the C-1 bus information. Too slow.

In NYC, every bus stop is equipped with a small screen that displays time estimates for the next few buses in real-time. I needed one of those in my room. So, with the extra time I had at the end of the semester, I started work on building a small device that could display time estimates for the C-1 bus.

### Part One: Webscraping
I've been familiar with the concept of webscraping before coming to Duke, but I've never tried webscraping myself. I thought that this would be a good first project for webscraping because Transloc also has a website, so I decided to give it a try. I figured that given its extensive packages, Python would be the easiest language to scrape with so I first used Python to ensure that webscraping was the right tool for this project. It didn't take long before I was able to retrieve the page HTML:

```py
import requests

URL = "https://duke.transloc.com/t/stops/4117202"
page = requests.get(URL)

print(page.text)
```

The payload data provided time estimates for the next two buses for the stop on East Campus, which was exactly what I was looking for. With that in mind, I started work on figuring out how I could webscrape on a microcontroller.

The two microcontrollers I had access to were the ESP-8266 and the ESP-32. The ESP-32 is the newer and more powerful of the two, so I went with that.